# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#   @file           :   tasks/Debian/disks.yaml
#   @description    :   Debian disk tasks
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
---
- name: "{{ ansible_os_family }} | disks | configure smartd"
  ansible.builtin.template:
    backup: true
    dest: /etc/smartd.conf
    group: root
    mode: 0644
    owner: root
    src: etc/smartd.conf.j2
  notify: restart smartd

- name: "{{ ansible_os_family }} | disks | enable fstrim"
  ansible.builtin.systemd:
    enabled: true
    service: fstrim.timer
  when: os_fstrim_enabled
