---
nameOverride: &app cribl-stream-worker
autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 50
config:
  group: default
  host: cribl-leader-internal
  token: "${SECRET_CRIBL_LEADER_SECRET}"
criblImage:
  repository: cribl/cribl
  tag: 3.5.4
resources:
  limits:
    cpu: 2000m
    memory: 4096Mi
  requests:
    cpu: 1250m
    memory: 256Mi
service:
  annotations:
    metallb.universe.tf/allow-shared-ip: *app
  loadBalancerIP: "${SVC_CRIBL_WORKER_ADDRESS}"
  ports:
    - name: syslog-tcp
      port: 9514
      protocol: TCP
    - name: syslog-udp
      port: 9514
      protocol: UDP
    - name: syslog-unifi
      port: 9520
      protocol: UDP
    - name: s2s
      port: 9997
      protocol: TCP
