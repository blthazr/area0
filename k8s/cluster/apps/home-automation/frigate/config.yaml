---
# --------------------------------------------------------------------------------------------------
# global | mqtt
# --------------------------------------------------------------------------------------------------
mqtt:
  host: "${MQTT_ADDRESS}"
  port: 1883
  user: "${FRIGATE_MQTT_USER}"
  password: "${FRIGATE_MQTT_PASSWORD}"
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | detectors
# --------------------------------------------------------------------------------------------------
detectors:
  coral:
    type: edgetpu
    device: usb
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | database
# --------------------------------------------------------------------------------------------------
database:
  path: /data/frigate.db
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | ffmpeg
# --------------------------------------------------------------------------------------------------
ffmpeg:
  hwaccel_args:
    - -hwaccel
    - vaapi
    - -hwaccel_device
    - /dev/dri/renderD128
    - -hwaccel_output_format
    - yuv420p
  output_args:
    record:
      - -f segment
      - -segment_time 10
      - -segment_format mp4
      - -reset_timestamps 1
      - -strftime 1
      - -c:v copy
      - -ar 44100
      - -c:a aac
    rtmp:
      - -c:v copy
      - -f flv
      - -ar 44100
      - -c:a aac
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | snapshots
# --------------------------------------------------------------------------------------------------
snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 7
# ==================================================================================================

cameras:
# --------------------------------------------------------------------------------------------------
# camera | driveway
# --------------------------------------------------------------------------------------------------
  frigate_driveway:
    ffmpeg:
      inputs:
        # High (1920x1080)
        - path: "rtsps://${UNIFI_PROTECT_ADDRESS}:7441/PLRgCzMZyaUNNvLK?enableSrtp"
          roles:
            - record
            - rtmp
        # Medium (1024x576)
        - path: "rtsps://${UNIFI_PROTECT_ADDRESS}:7441/gKdGjLhqS7Lo8u0q?enableSrtp"
          roles:
            - detect
    detect:
      enabled: true
      width: 1024
      height: 576
      fps: 5
    motion:
      mask:
        - 0,0,0,45,190,45,190,0 # timestamp
    objects:
      track:
        - bicycle
        - car
        - dog
        - person
    record:
      enabled: false
    rtmp:
      enabled: false
    snapshots:
      enabled: false
    zones:
      driveway-zone:
        coordinates: 315,104,784,104,992,576,0,576
        objects:
          - bicycle
          - car
          - person
      entire-yard-zone:
        coordinates: 0,576,1024,576,1024,204,0,195
        objects:
          - bicycle
          - dog
          - person
      front-yard-zone:
        coordinates: 0,576,1024,576,1024,204,0,195
        objects:
          - bicycle
          - dog
          - person
      sidewalk-zone:
        coordinates: 0,113,0,198,1024,209,1024,115
        objects:
          - bicycle
          - dog
          - person
      street-zone:
        coordinates: 0,113,1024,115,1024,0,0,0
        objects:
          - bicycle
          - car
          - dog
          - person
# ==================================================================================================
