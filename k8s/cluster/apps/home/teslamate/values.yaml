---
env:
  TZ: "${CLUSTER_TIME_ZONE}"
  DATABASE_USER: "${SECRET_TESLAMATE_POSTGRES_USERNAME}"
  DATABASE_PASS: "${SECRET_TESLAMATE_POSTGRES_PASSWORD}"
  DATABASE_NAME: teslamate
  MQTT_HOST: "${MQTT_ADDRESS}"
  MQTT_USERNAME: "${SECRET_MQTT_USERNAME}"
  MQTT_PASSWORD: "${SECRET_MQTT_PASSWORD}"
image:
  repository: teslamate/teslamate
  tag: 1.26.1
ingress:
  main:
    enabled: true
    hosts:
      - host: &host "teslamate.${SECRET_DOMAIN}"
        paths:
          - path: /
            pathType: Prefix
    ingressClassName: nginx
    tls:
      - hosts:
          - *host
persistence:
  config:
    enabled: true
    existingClaim: teslamate-config-v1
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: '14'
  postgresqlUsername: "${SECRET_TESLAMATE_POSTGRES_USER}"
  postgresqlPassword: "${SECRET_TESLAMATE_POSTGRES_PASSWORD}"
  postgresqlDatabase: teslamate
  persistence:
    enabled: true
    existingClaim: teslamate-db-v1
probes:
  liveness:
    spec:
      failureThreshold: 15
      periodSeconds: 10
  readiness:
    spec:
      failureThreshold: 15
      periodSeconds: 10
  startup:
    spec:
      failureThreshold: 30
      initialDelaySeconds: 15
      periodSeconds: 10
