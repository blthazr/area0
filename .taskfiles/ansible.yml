# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
#   @file           :   .taskfiles/ansible.yml
#   @description    :   ansible tasks
# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
---
version: "3"

vars:
  ANSIBLE_DIR: "{{.PROJECT_DIR}}/ansible"

tasks:
  # task ansible:deps
  deps:
    desc: install/upgrade ansible dependencies
    cmds:
      - "ansible-galaxy role install --roles-path ./roles-galaxy  --role-file ./requirements.yml --force"
      - "ansible-galaxy collection install --collections-path ./collections --requirements-file ./requirements.yml --force"
    dir: "{{.ANSIBLE_DIR}}"
    silent: true
