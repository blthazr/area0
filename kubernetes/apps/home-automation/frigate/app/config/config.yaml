---
# --------------------------------------------------------------------------------------------------
# global | mqtt
# --------------------------------------------------------------------------------------------------
mqtt:
  host: "${MQTT_ADDRESS}"
  port: 1883
  user: "${FRIGATE_MQTT_USER}"
  password: "${FRIGATE_MQTT_PASSWORD}"
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | detectors
# --------------------------------------------------------------------------------------------------
detectors:
  coral:
    type: edgetpu
    device: usb
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | database
# --------------------------------------------------------------------------------------------------
database:
  path: /data/frigate.db
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | ffmpeg
# --------------------------------------------------------------------------------------------------
ffmpeg:
  global_args:
    - -hide_banner
    - -loglevel warning
  hwaccel_args:
    - -hwaccel vaapi
    - -hwaccel_device /dev/dri/renderD128
    - -hwaccel_output_format yuv420p
  output_args:
    record:
      - -f segment
      - -segment_time 10
      - -segment_format mp4
      - -reset_timestamps 1
      - -strftime 1
      - -map 0:v:0
      - -map 0:a:0
      - -c copy
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | snapshots
# --------------------------------------------------------------------------------------------------
snapshots:
  enabled: true
  timestamp: false
  bounding_box: true
  retain:
    default: 7
# ==================================================================================================

# --------------------------------------------------------------------------------------------------
# global | objects
# --------------------------------------------------------------------------------------------------
objects:
  track: ["person"]
  filters:
    person:
      min_area: 5000
      max_area: 100000
      threshold: 0.7
# ==================================================================================================

cameras:
# --------------------------------------------------------------------------------------------------
# camera | front door
# --------------------------------------------------------------------------------------------------
  frigate_front_door:
    ffmpeg:
      inputs:
        - path: rtsp://localhost:8554/frigate_front_door
          roles:
            - record
        # High (1600x1200)
        - path: "rtsp://${UNIFI_PROTECT_ADDRESS}:7447/BkoLvCjvhphS7FQ5"
          roles:
            - restream
        # Medium (960x720)
        - path: "rtsp://${UNIFI_PROTECT_ADDRESS}:7447/dfsiwxmeWkdRHWiX"
          roles:
            - detect
            - rtmp
    detect:
      enabled: true
      width: 960
      height: 720
      fps: 10
    motion:
      mask:
        - 0,0,0,60,200,60,200,0 # timestamp
        - 314,162,288,182,194,0,286,0 # door top light
        - 960,300,612,322,612,402,647,407,649,381,960,420 # sidewalk and street
    objects:
      track:
        - bicycle
        - car
        - dog
    record:
      enabled: false
    rtmp:
      enabled: false
    snapshots:
      enabled: true
      bounding_box: false
# ==================================================================================================
