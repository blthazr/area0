---
nameOverride: &app theme-park
controller:
  replicas: 1
  strategy: RollingUpdate
env:
  THEME_PARK__PORT: &port 8080
image:
  repository: ghcr.io/onedr0p/theme-park
  tag: 1.13.8@sha256:af878f481549c111a7ed31ff6a317f249bdcdaf232e3bab6c9d9a5a4c74604e1
ingress:
  main:
    annotations:
      external-dns.home.arpa/enabled: "true"
      hajimari.io/enable: "false"
    enabled: true
    hosts:
      - host: &host "{{ .Release.Name }}.${SECRET_DOMAIN}"
        paths:
          - path: /
            pathType: Prefix
    ingressClassName: nginx
    tls:
      - hosts:
          - *host
resources:
  limits:
    memory: 50Mi
  requests:
    cpu: 5m
    memory: 10Mi
service:
  main:
    ports:
      http:
        port: *port
topologySpreadConstraints:
  - labelSelector:
      matchLabels:
        app.kubernetes.io/name: *app
    maxSkew: 1
    topologyKey: kubernetes.io/hostname
    whenUnsatisfiable: DoNotSchedule
